<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Run 3 Requests Example</title>
</head>
<body>
  <h1>Run Bitmoji API Requests</h1>

  <label for="email">Email:</label>
  <input type="email" id="email" placeholder="Enter email" required />
  <br><br>

  <label for="password">Password:</label>
  <input type="password" id="password" placeholder="Enter password" required />
  <br><br>

  <button id="runButton">Run All Requests</button>

  <script>
    async function runAllRequests() {
      const email = document.getElementById('email').value;
      const passworde = document.getElementById('password').value;

      if (!email || !password) {
        console.error('Please enter both email and password.');
        alert('Email and password are required!');
        return;
      }

      try {
        // Request 1: Create User
        console.log('Running Request 1: Create User...');
        const createUserResponse = await fetch('https://us-east-1-bitmoji.api.snapchat.com/api/user', {
          method: 'POST',
          headers: {
            'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundaryKaXwokt7oVMzOn1j',
            'Sec-Ch-Ua-Platform': '"Windows"',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.6668.71 Safari/537.36'
          },
          body: `
------WebKitFormBoundaryKaXwokt7oVMzOn1j
Content-Disposition: form-data; name="email"

${email}
------WebKitFormBoundaryKaXwokt7oVMzOn1j
Content-Disposition: form-data; name="password"

${password}
------WebKitFormBoundaryKaXwokt7oVMzOn1j
Content-Disposition: form-data; name="birthday"

2000-2-2
------WebKitFormBoundaryKaXwokt7oVMzOn1j--`
        });
        const userData = await createUserResponse.json();
        console.log('Request 1 Response:', userData);

        // Request 2: Login User
        console.log('Running Request 2: Login User...');
        const loginResponse = await fetch('https://us-east-1-bitmoji.api.snapchat.com/api/user/login', {
          method: 'POST',
          headers: {
            'Access-Control-Allow-Origin'
            'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundaryHU62jYgIAdPPpA0J',
            'Sec-Ch-Ua-Platform': '"Windows"',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.6668.71 Safari/537.36'
          },
          body: `
------WebKitFormBoundaryHU62jYgIAdPPpA0J
Content-Disposition: form-data; name="username"

${email}
------WebKitFormBoundaryHU62jYgIAdPPpA0J
Content-Disposition: form-data; name="password"

${passworde}
------WebKitFormBoundaryHU62jYgIAdPPpA0J
Content-Disposition: form-data; name="client_id"

imoji
------WebKitFormBoundaryHU62jYgIAdPPpA0J
Content-Disposition: form-data; name="grant_type"

password
------WebKitFormBoundaryHU62jYgIAdPPpA0J
Content-Disposition: form-data; name="client_secret"

ignore-me
------WebKitFormBoundaryHU62jYgIAdPPpA0J--`
        });
        const loginData = await loginResponse.json();
        console.log('Request 2 Response:', loginData);

        const accessToken = loginData.access_token; // Extract token from login response

        // Request 3: Create Avatar
        console.log('Running Request 3: Create Avatar...');
        const avatarResponse = await fetch('https://us-east-1-bitmoji.api.snapchat.com/api/avatar-builder-v3/avatar', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json;charset=UTF-8',
            'Bitmoji-Token': accessToken,
            'Sec-Ch-Ua-Platform': '"Windows"',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.6668.71 Safari/537.36'
          },
          body: JSON.stringify({
            gender: 1,
            style: 5,
            mode: "create",
            option_ids: {
              skin_tone: 12434877,
              hair_tone: 2566954,
              hair: 1303,
              jaw: 1389,
              brow: 1538,
              eye: 1610,
              pupil: 2152,
              pupil_tone: 8026746,
              nose: 1436,
              mouth: 2337,
              ear: 1424,
              face_proportion: 1,
              top: 54,
              top_tone1: 16448250,
              bottom: 137,
              bottom_tone1: 16448250,
              footwear: 0,
              clothing_type: 1,
              is_tucked: 0
            }
          })
        });
        const avatarData = await avatarResponse.json();
        console.log('Request 3 Response:', avatarData);

      } catch (error) {
        console.error('Error running requests:', error);
      }
    }

    document.getElementById('runButton').addEventListener('click', runAllRequests);
  </script>
</body>
</html> 
