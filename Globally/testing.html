<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Private Messaging App</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="chat-modules.js"></script>
</head>
<body>
  <h1>Private Messaging App</h1>
  <div>
    <h2>Sign Up</h2>
    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Password">
    <input type="text" id="displayName" placeholder="Display Name">
    <button onclick="signUp()">Sign Up</button>
  </div>
  <div>
    <h2>Sign In</h2>
    <input type="email" id="signInEmail" placeholder="Email">
    <input type="password" id="signInPassword" placeholder="Password">
    <button onclick="signIn()">Sign In</button>
  </div>
  <div>
    <h2>Friends</h2>
    <input type="email" id="friendEmail" placeholder="Friend's Email">
    <button onclick="addFriend()">Add Friend</button>
  </div>
  <div>
    <h2>Chat</h2>
    <div id="messages"></div>
    <input type="text" id="messageInput" placeholder="Type a message">
    <button onclick="sendMessage()">Send</button>
  </div>
  <button onclick="signOut()">Sign Out</button>

  <script>
    async function signUp() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const displayName = document.getElementById("displayName").value;
      await ChatModule.signUp(email, password, displayName);
    }

    async function signIn() {
      const email = document.getElementById("signInEmail").value;
      const password = document.getElementById("signInPassword").value;
      await ChatModule.signIn(email, password);
    }

    async function addFriend() {
      const friendEmail = document.getElementById("friendEmail").value;
      await ChatModule.addFriend(friendEmail);
    }

    async function sendMessage() {
      const message = document.getElementById("messageInput").value;
      await ChatModule.sendMessage(currentChat, message);
    }

    function signOut() {
      ChatModule.signOut();
    }
  </script>
</body>
</html>
