<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <title>IQ Profile</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #F2EBD9;
      --card: #EDE5CF;
      --tan-dark: #C4AD8A;
      --tan-darker: #A08C6E;
      --ink: #2A2018;
      --ink-light: #6B5740;
      --nav-bg: #E4D9BF;
      --nav-border: #C4AD8A;
      --bar-bg: #D5C8AD;
      --radius: 16px;
      --side-nav-w: 82px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { width: 100%; height: 100%; overflow: hidden; }

    body {
      background: var(--bg);
      font-family: 'Nunito', sans-serif;
      color: var(--ink);
      display: flex;
      flex-direction: row;
    }

    /* ─── DOODLE BG ─── */
    .doodle-bg {
      position: fixed; inset: 0;
      pointer-events: none; z-index: 0; overflow: hidden;
    }
    .doodle-bg svg {
      position: absolute; opacity: 0.045;
      fill: none; stroke: var(--ink);
      stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
    }

    /* ─── SIDE NAV (desktop 640+) ─── */
    nav {
      position: fixed;
      left: 0; top: 0; bottom: 0;
      width: var(--side-nav-w);
      background: var(--nav-bg);
      border-right: 2px solid var(--nav-border);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 6px;
      z-index: 100;
    }

    .nav-btn {
      width: 60px;
      padding: 12px 6px 10px;
      background: none; border: none; cursor: pointer;
      display: flex; flex-direction: column;
      align-items: center; gap: 5px;
      color: var(--ink-light);
      font-family: 'Patrick Hand', cursive;
      font-size: 11px; letter-spacing: 0.3px;
      border-radius: 14px;
      transition: background 0.15s, color 0.15s;
    }
    .nav-btn svg {
      width: 24px; height: 24px;
      stroke: currentColor; fill: none;
      stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
      transition: transform 0.2s;
    }
    .nav-btn.active { color: var(--ink); background: var(--card); }
    .nav-btn.active svg { transform: scale(1.1); }

    .nav-divider {
      width: 36px; height: 1.5px;
      background: var(--nav-border); border-radius: 2px;
      margin: 4px 0;
    }

    /* ─── BOTTOM NAV (mobile <640) ─── */
    @media (max-width: 639px) {
      body { flex-direction: column; }
      nav {
        position: fixed;
        top: auto; left: 0; right: 0; bottom: 0;
        width: 100%; height: 62px;
        flex-direction: row;
        justify-content: center;
        border-right: none;
        border-top: 2px solid var(--nav-border);
      }
      .nav-btn { width: auto; padding: 8px 30px; flex-direction: column; }
      .nav-divider { width: 1.5px; height: 30px; margin: 0 6px; }
    }

    /* ─── APP SHELL ─── */
    #app {
      position: relative; z-index: 1;
      margin-left: var(--side-nav-w);
      flex: 1; height: 100vh;
      overflow: hidden;
      display: flex; flex-direction: column;
    }
    @media (max-width: 639px) {
      #app { margin-left: 0; padding-bottom: 62px; }
    }

    /* ─── PAGES ─── */
    .page { display: none; flex: 1; flex-direction: column; height: 100%; overflow-y: auto; }
    .page.active { display: flex; }

    /* ─── IMPROVE PAGE ─── */
    #page-improve {
      align-items: stretch;
      padding: 0;
      overflow: hidden;
    }

    .feed-wrap {
      flex: 1;
      overflow-y: scroll;
      scroll-snap-type: y mandatory;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }
    .feed-wrap::-webkit-scrollbar { display: none; }

    .feed-slide {
      height: 100%;
      min-height: 100%;
      scroll-snap-align: start;
      scroll-snap-stop: always;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 24px 20px 20px;
      position: relative;
    }

    /* The question card */
    .q-card {
      background: var(--card);
      border: 2px solid var(--tan-dark);
      border-radius: 28px;
      width: min(420px, calc(100vw - 40px));
      aspect-ratio: 1 / 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 32px 28px;
      gap: 20px;
      box-shadow: 0 8px 40px rgba(0,0,0,0.09);
      position: relative;
      overflow: hidden;
    }

    /* subtle inner texture */
    .q-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(ellipse at 30% 20%, rgba(255,255,255,0.35) 0%, transparent 70%);
      pointer-events: none;
    }

    .q-category {
      font-family: 'Patrick Hand', cursive;
      font-size: 11px;
      letter-spacing: 2.5px;
      text-transform: uppercase;
      color: var(--tan-darker);
      background: rgba(164,140,110,0.12);
      padding: 4px 14px;
      border-radius: 20px;
      border: 1px solid var(--tan-dark);
    }

    .q-text {
      font-family: 'Nunito', sans-serif;
      font-size: clamp(15px, 3.5vw, 19px);
      font-weight: 700;
      color: var(--ink);
      text-align: center;
      line-height: 1.5;
    }

    /* Pattern grid for matrix questions */
    .q-pattern {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 6px;
      width: min(180px, 40vw);
    }
    .q-cell {
      aspect-ratio: 1/1;
      background: var(--bar-bg);
      border-radius: 8px;
      border: 1.5px solid var(--tan-dark);
      display: flex; align-items: center; justify-content: center;
      font-family: 'Verdana', sans-serif;
      font-size: clamp(13px, 3vw, 17px);
      font-weight: 700;
      color: var(--ink);
    }
    .q-cell.blank {
      background: rgba(164,140,110,0.08);
      border-style: dashed;
      color: var(--tan-dark);
      font-size: clamp(18px, 4vw, 24px);
    }

    /* Answer options */
    .q-options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      width: 100%;
    }
    .q-opt {
      background: var(--bg);
      border: 2px solid var(--tan-dark);
      border-radius: 12px;
      padding: 10px 8px;
      font-family: 'Nunito', sans-serif;
      font-size: clamp(13px, 2.8vw, 15px);
      font-weight: 700;
      color: var(--ink);
      cursor: pointer;
      text-align: center;
      transition: background 0.15s, border-color 0.15s, transform 0.1s;
    }
    .q-opt:hover { background: var(--tan-dark); color: #fff; transform: scale(1.03); }
    .q-opt.correct { background: #5EB85E; border-color: #4AAA4A; color: #fff; }
    .q-opt.wrong   { background: #C43820; border-color: #a0301a; color: #fff; }

    /* Scroll hint */
    .scroll-hint {
      margin-top: 18px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      opacity: 0.55;
      font-family: 'Patrick Hand', cursive;
      font-size: 13px;
      color: var(--ink-light);
    }
    .scroll-hint svg {
      width: 20px; height: 20px;
      stroke: var(--ink-light); fill: none;
      stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
      animation: bounce 1.6s ease-in-out infinite;
    }
    @keyframes bounce {
      0%,100% { transform: translateY(0); }
      50%      { transform: translateY(5px); }
    }

    /* hide scroll hint on last slide */
    .feed-slide:last-child .scroll-hint { visibility: hidden; }

    /* slide number dots */
    .feed-dots {
      position: absolute;
      right: 14px; top: 50%;
      transform: translateY(-50%);
      display: flex; flex-direction: column; gap: 6px;
    }
    .feed-dot {
      width: 6px; height: 6px;
      border-radius: 50%;
      background: var(--tan-dark);
      opacity: 0.3;
      transition: opacity 0.25s, transform 0.25s;
    }
    .feed-dot.active { opacity: 1; transform: scale(1.4); }

    /* ─── PROFILE PAGE ─── */
    #page-profile { align-items: stretch; }

    .profile-scroll {
      flex: 1; overflow-y: auto;
      display: flex; flex-direction: column;
      align-items: center;
      padding: 32px 24px 40px;
    }

    .profile-topbar {
      width: 100%; display: flex;
      justify-content: flex-end;
      margin-bottom: 22px;
    }
    .share-btn {
      background: var(--card);
      border: 2px solid var(--tan-dark);
      border-radius: 40px;
      padding: 8px 18px;
      font-family: 'Patrick Hand', cursive;
      font-size: 13px; color: var(--ink);
      cursor: pointer;
      display: flex; align-items: center; gap: 7px;
      transition: background 0.15s, color 0.15s, transform 0.1s;
    }
    .share-btn:hover { background: var(--tan-dark); color: #fff; transform: scale(1.03); }
    .share-btn svg {
      width: 14px; height: 14px;
      stroke: currentColor; fill: none;
      stroke-width: 2.2; stroke-linecap: round; stroke-linejoin: round;
    }

    /* Avatar */
    .avatar-ring {
      width: 112px; height: 112px;
      border-radius: 50%;
      background: var(--card);
      border: 4px solid var(--tan-dark);
      box-shadow: 0 4px 22px rgba(0,0,0,0.1);
      overflow: hidden;
      display: flex; align-items: center; justify-content: center;
      margin-bottom: 20px;
    }
    .avatar-ring img { width: 100%; height: 100%; object-fit: cover; }
    .avatar-icon {
      width: 56px; height: 56px;
      stroke: var(--tan-darker); fill: none;
      stroke-width: 1.6; stroke-linecap: round; stroke-linejoin: round;
    }

    /* IQ */
    .iq-number {
      font-family: 'Verdana', 'Geneva', sans-serif;
      font-size: 84px; font-weight: 700;
      color: var(--ink); line-height: 1; letter-spacing: -2px;
    }
    .iq-label {
      font-family: 'Verdana', 'Geneva', sans-serif;
      font-size: 17px; color: var(--ink-light);
      letter-spacing: 5px; margin-top: 2px;
    }

    /* Percentile */
    .pct-tag {
      margin-top: 12px;
      background: var(--tan-darker); color: #F5EDD8;
      font-family: 'Patrick Hand', cursive;
      font-size: 14px;
      padding: 5px 18px; border-radius: 20px;
      letter-spacing: 0.4px;
    }

    .section-divider {
      width: 55%; height: 1.5px;
      background: linear-gradient(90deg, transparent, var(--tan-dark), transparent);
      margin: 24px 0 22px;
    }

    /* Stats */
    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      width: 100%; max-width: 540px;
    }
    .stat-card {
      background: var(--card);
      border: 1.5px solid var(--tan-dark);
      border-radius: var(--radius);
      padding: 12px 14px;
      display: flex; flex-direction: column; gap: 8px;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .stat-card:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(0,0,0,0.07); }

    .stat-name {
      font-family: 'Nunito', sans-serif;
      font-size: 11px; font-weight: 800;
      color: var(--ink-light);
      text-transform: uppercase; letter-spacing: 0.9px;
    }
    .stat-bar-wrap {
      background: var(--bar-bg);
      border-radius: 8px; height: 30px; overflow: hidden;
    }
    .stat-bar {
      height: 100%; border-radius: 8px;
      display: flex; align-items: center; padding-left: 10px;
      width: 0%;
      transition: width 0.9s cubic-bezier(.23,1,.32,1);
    }
    .stat-val {
      font-family: 'Verdana', 'Geneva', sans-serif;
      font-size: 15px; font-weight: 700;
      color: #fff; text-shadow: 0 1px 3px rgba(0,0,0,0.22);
    }

    .bar-ps  { background: linear-gradient(90deg, #D96A28, #F09560); }
    .bar-mem { background: linear-gradient(90deg, #8A5BAF, #B48FD4); }
    .bar-pr  { background: linear-gradient(90deg, #C43820, #E86858); }
    .bar-cs  { background: linear-gradient(90deg, #2A96B8, #65C4DA); }
    .bar-ma  { background: linear-gradient(90deg, #4AAA4A, #82CC82); }
    .bar-ei  { background: linear-gradient(90deg, #C44878, #E888A8); }

    /* ─── ANIMS ─── */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(14px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .a0 { animation: fadeUp 0.4s ease both; }
    .a1 { animation: fadeUp 0.4s 0.07s ease both; }
    .a2 { animation: fadeUp 0.4s 0.14s ease both; }
    .a3 { animation: fadeUp 0.4s 0.21s ease both; }

    /* ─── SCROLLBAR ─── */
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--tan-dark); border-radius: 4px; }
  </style>
</head>
<body>

  <!-- DOODLE BG -->
  <div class="doodle-bg">
    <svg style="left:6%;top:6%;width:140px;height:140px;" viewBox="0 0 100 100">
      <path d="M50 80 C30 80 15 65 15 50 C15 35 28 28 38 30 C40 20 50 15 60 20 C70 10 85 18 85 32 C92 36 90 50 82 55 C80 68 65 80 50 80Z"/>
      <path d="M38 30 C38 45 45 52 50 55"/><path d="M60 20 C58 35 55 48 50 55"/>
      <path d="M15 50 C25 50 35 55 50 55"/><path d="M85 32 C75 38 62 48 50 55"/>
      <path d="M50 55 L50 80"/><circle cx="30" cy="45" r="3"/><circle cx="70" cy="38" r="3"/>
    </svg>
    <svg style="right:8%;top:10%;width:100px;height:110px;" viewBox="0 0 80 90">
      <circle cx="40" cy="32" r="16"/>
      <path d="M32 48 L32 56 Q32 60 40 60 Q48 60 48 56 L48 48"/>
      <line x1="34" y1="60" x2="46" y2="60"/>
      <line x1="40" y1="8" x2="40" y2="2"/>
      <line x1="58" y1="14" x2="63" y2="9"/>
      <line x1="22" y1="14" x2="17" y2="9"/>
      <line x1="64" y1="32" x2="70" y2="32"/>
      <line x1="10" y1="32" x2="16" y2="32"/>
    </svg>
    <svg style="left:3%;top:43%;width:140px;height:52px;" viewBox="0 0 135 48">
      <text x="4" y="38" font-family="serif" font-size="32" stroke="currentColor" fill="none" stroke-width="1.3">IQ = 179</text>
    </svg>
    <svg style="right:4%;top:48%;width:90px;height:90px;" viewBox="0 0 80 80">
      <path d="M10 10 L35 10 C35 10 33 15 33 20 C33 25 38 25 40 20 C42 15 40 10 40 10 L65 10 L65 35 C65 35 60 33 55 33 C50 33 50 38 55 40 C60 42 65 40 65 40 L65 65 L40 65 C40 65 42 60 40 55 C38 50 33 50 33 55 C33 60 35 65 35 65 L10 65 L10 40 C10 40 15 42 20 40 C25 38 25 33 20 33 C15 33 10 35 10 35Z"/>
    </svg>
    <svg style="left:55%;top:3%;width:60px;height:60px;" viewBox="0 0 56 56">
      <polygon points="28,4 31,19 46,19 34,28 38,43 28,33 18,43 22,28 10,19 25,19"/>
    </svg>
    <svg style="left:14%;bottom:18%;width:70px;height:110px;" viewBox="0 0 58 100">
      <path d="M10 10 C30 20 30 40 10 50 C30 60 30 80 10 90" stroke-dasharray="3,4"/>
      <path d="M48 10 C28 20 28 40 48 50 C28 60 28 80 48 90" stroke-dasharray="3,4"/>
      <line x1="10" y1="30" x2="48" y2="30"/>
      <line x1="10" y1="50" x2="48" y2="50"/>
      <line x1="10" y1="70" x2="48" y2="70"/>
    </svg>
    <svg style="right:3%;bottom:22%;width:60px;height:90px;" viewBox="0 0 52 82">
      <text x="3" y="62" font-family="serif" font-size="58" stroke="currentColor" fill="none" stroke-width="1.4">?</text>
    </svg>
    <svg style="left:40%;bottom:9%;width:90px;height:44px;" viewBox="0 0 90 44">
      <path d="M45 22 C45 12 60 5 65 22 C70 38 85 32 85 22 C85 12 70 5 65 22 C60 38 45 32 45 22 C45 12 30 5 25 22 C20 38 5 32 5 22 C5 12 20 5 25 22 C30 38 45 32 45 22Z"/>
    </svg>
  </div>

  <!-- SIDE / BOTTOM NAV -->
  <nav>
    <button class="nav-btn active" id="btn-improve" onclick="showPage('improve')">
      <svg viewBox="0 0 24 24">
        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
        <polyline points="17 6 23 6 23 12"/>
      </svg>
      Improve
    </button>
    <div class="nav-divider"></div>
    <button class="nav-btn" id="btn-profile" onclick="showPage('profile')">
      <svg viewBox="0 0 24 24">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
      Profile
    </button>
  </nav>

  <!-- APP -->
  <div id="app">

    <!-- IMPROVE PAGE -->
    <section id="page-improve" class="page active">
      <div class="feed-wrap" id="feed">

        <!-- ── SLIDE 1: Number sequence ── -->
        <div class="feed-slide">
          <div class="q-card">
            <div class="q-category">Number Sequence</div>
            <div class="q-text">What comes next in the sequence?<br><br>2 &nbsp;·&nbsp; 6 &nbsp;·&nbsp; 18 &nbsp;·&nbsp; 54 &nbsp;·&nbsp; <span style="color:var(--tan-darker)">?</span></div>
            <div class="q-options" data-answer="162">
              <button class="q-opt" data-val="108" onclick="answer(this)">108</button>
              <button class="q-opt" data-val="162" onclick="answer(this)">162</button>
              <button class="q-opt" data-val="216" onclick="answer(this)">216</button>
              <button class="q-opt" data-val="144" onclick="answer(this)">144</button>
            </div>
          </div>
          <div class="scroll-hint">
            <svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg>
            Scroll down for more
          </div>
        </div>

        <!-- ── SLIDE 2: Matrix pattern ── -->
        <div class="feed-slide">
          <div class="q-card">
            <div class="q-category">Pattern Recognition</div>
            <div class="q-text">Which number completes the matrix?</div>
            <div class="q-pattern">
              <div class="q-cell">3</div>
              <div class="q-cell">6</div>
              <div class="q-cell">9</div>
              <div class="q-cell">4</div>
              <div class="q-cell">8</div>
              <div class="q-cell">12</div>
              <div class="q-cell">5</div>
              <div class="q-cell">10</div>
              <div class="q-cell blank">?</div>
            </div>
            <div class="q-options" data-answer="15">
              <button class="q-opt" data-val="14" onclick="answer(this)">14</button>
              <button class="q-opt" data-val="15" onclick="answer(this)">15</button>
              <button class="q-opt" data-val="16" onclick="answer(this)">16</button>
              <button class="q-opt" data-val="20" onclick="answer(this)">20</button>
            </div>
          </div>
          <div class="scroll-hint">
            <svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg>
            Scroll down for more
          </div>
        </div>

        <!-- ── SLIDE 3: Odd one out ── -->
        <div class="feed-slide">
          <div class="q-card">
            <div class="q-category">Odd One Out</div>
            <div class="q-text">Which word does not belong with the others?</div>
            <div class="q-options" data-answer="Hammer" style="grid-template-columns:1fr 1fr;">
              <button class="q-opt" data-val="Compass" onclick="answer(this)">Compass</button>
              <button class="q-opt" data-val="Ruler" onclick="answer(this)">Ruler</button>
              <button class="q-opt" data-val="Protractor" onclick="answer(this)">Protractor</button>
              <button class="q-opt" data-val="Hammer" onclick="answer(this)">Hammer</button>
            </div>
            <div style="font-family:'Patrick Hand',cursive;font-size:12px;color:var(--ink-light);text-align:center;margin-top:-8px;">Compass, Ruler, and Protractor are all measuring tools.</div>
          </div>
          <div class="scroll-hint"></div>
        </div>

      </div><!-- feed-wrap -->

      <!-- Dot indicators -->
      <div class="feed-dots" id="feed-dots">
        <div class="feed-dot active"></div>
        <div class="feed-dot"></div>
        <div class="feed-dot"></div>
      </div>
    </section>

    <!-- PROFILE PAGE -->
    <section id="page-profile" class="page">
      <div class="profile-scroll">

        <div class="profile-topbar a0">
          <button class="share-btn">
            <svg viewBox="0 0 24 24">
              <line x1="22" y1="2" x2="11" y2="13"/>
              <polygon points="22 2 15 22 11 13 2 9 22 2"/>
            </svg>
            Share Stats
          </button>
        </div>

        <div class="avatar-ring a0">
          <!-- To use your photo: replace the SVG below with <img src="photo.jpg" alt="Profile"> -->
          <svg class="avatar-icon" viewBox="0 0 64 64">
            <circle cx="32" cy="22" r="12"/>
            <path d="M8 58 C8 44 18 36 32 36 C46 36 56 44 56 58"/>
          </svg>
        </div>

        <div class="iq-number a1">179</div>
        <div class="iq-label a1">IQ</div>
        <div class="pct-tag a2" id="pct-tag"></div>

        <div class="section-divider"></div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-name">Problem Solving</div>
            <div class="stat-bar-wrap"><div class="stat-bar bar-ps" data-val="80"><span class="stat-val">80</span></div></div>
          </div>
          <div class="stat-card">
            <div class="stat-name">Memory</div>
            <div class="stat-bar-wrap"><div class="stat-bar bar-mem" data-val="85"><span class="stat-val">85</span></div></div>
          </div>
          <div class="stat-card">
            <div class="stat-name">Pattern Recog.</div>
            <div class="stat-bar-wrap"><div class="stat-bar bar-pr" data-val="97"><span class="stat-val">97</span></div></div>
          </div>
          <div class="stat-card">
            <div class="stat-name">Common Sense</div>
            <div class="stat-bar-wrap"><div class="stat-bar bar-cs" data-val="75"><span class="stat-val">75</span></div></div>
          </div>
          <div class="stat-card">
            <div class="stat-name">Mental Agility</div>
            <div class="stat-bar-wrap"><div class="stat-bar bar-ma" data-val="86"><span class="stat-val">86</span></div></div>
          </div>
          <div class="stat-card">
            <div class="stat-name">Emotional Intel.</div>
            <div class="stat-bar-wrap"><div class="stat-bar bar-ei" data-val="67"><span class="stat-val">67</span></div></div>
          </div>
        </div>

      </div>
    </section>

  </div>

  <script>
    // ── Feed scroll dots ─────────────────────────────────────────
    const feed = document.getElementById('feed');
    const dots = document.querySelectorAll('.feed-dot');
    let currentSlide = 0;

    feed.addEventListener('scroll', () => {
      const slideH = feed.clientHeight;
      const idx = Math.round(feed.scrollTop / slideH);
      if (idx !== currentSlide) {
        currentSlide = idx;
        dots.forEach((d, i) => d.classList.toggle('active', i === idx));
      }
    }, { passive: true });

    // ── Answer logic ─────────────────────────────────────────────
    function answer(btn) {
      const opts = btn.closest('.q-options');
      if (opts.dataset.answered) return; // already answered
      opts.dataset.answered = '1';
      const correct = opts.dataset.answer;
      opts.querySelectorAll('.q-opt').forEach(o => {
        if (o.dataset.val === correct) o.classList.add('correct');
        else if (o === btn)            o.classList.add('wrong');
        o.style.pointerEvents = 'none';
      });
    }

    // ── Percentile calc ──────────────────────────────────────────
    function erf(x) {
      const a1=0.254829592,a2=-0.284496736,a3=1.421413741,a4=-1.453152027,a5=1.061405429,p=0.3275911;
      const s = x < 0 ? -1 : 1; x = Math.abs(x);
      const t = 1/(1+p*x);
      const y = 1-(((((a5*t+a4)*t)+a3)*t+a2)*t+a1)*t*Math.exp(-x*x);
      return s*y;
    }
    function iqTopPct(iq) {
      const z = (iq - 100) / 15;
      const cdf = 0.5*(1+erf(z/Math.sqrt(2)));
      return (1-cdf)*100;
    }
    function fmtPct(p) {
      if (p >= 1)     return p.toFixed(1)+'%';
      if (p >= 0.1)   return p.toFixed(2)+'%';
      if (p >= 0.01)  return p.toFixed(3)+'%';
      if (p >= 0.001) return p.toFixed(4)+'%';
      return p.toFixed(5)+'%';
    }

    const IQ_SCORE = 179;
    const pct = iqTopPct(IQ_SCORE);
    document.getElementById('pct-tag').textContent = 'Top ' + fmtPct(pct) + ' in the world';

    // ── Page switch ──────────────────────────────────────────────
    function showPage(id) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
      document.getElementById('page-'+id).classList.add('active');
      document.getElementById('btn-'+id).classList.add('active');
      if (id === 'profile') setTimeout(animateBars, 60);
    }

    // ── Bar animation ────────────────────────────────────────────
    function animateBars() {
      document.querySelectorAll('.stat-bar').forEach(bar => {
        bar.style.width = '0%';
        requestAnimationFrame(() => setTimeout(() => {
          bar.style.width = bar.dataset.val + '%';
        }, 40));
      });
    }
  </script>
</body>
</html>